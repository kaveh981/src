{
  "config": {
    "target": "https://market.indexexchange.com/api/v1",
    "phases": [
      {"duration": 120, "arrivalRate": 10}
    ],
    "processor": "./converter.ts",
    "payload": [{
      "path": "./users_and_proposals.csv",
      "fields": ["proposalID", "buyer", "pub"], 
      "order": "sequence"
    }]
  },
    "scenarios": [
    {
      "name": "Main Flow",
      "flow": [
        {"get": {
          "url": "/users/{{ pub }}",
          "headers": {
                "IXM-UserID": "{{ buyer }}",
                "IXM-AccessToken": "{\"userID\":{{ buyer }}, \"userType\":22}"
                }
            }
        },
        
        {"get": {
            "url": "/deals/proposals/{{ proposalID }}",   
            "headers": {
                "IXM-UserID": "{{ buyer }}",
                "IXM-AccessToken": "{\"userID\":{{ buyer }}, \"userType\":22}"
                }   
            }
        },
         
        {"put": {
          "url": "/deals/negotiations",
          "beforeRequest": "stringToNumber",
          "headers": {
              "IXM-UserID": "{{ buyer }}", 
              "IXM-AccessToken": "{\"userID\":{{ buyer }}, \"userType\":22}"
            },
          "json": {"proposal_id": "{{ proposalID }}", "partner_id": "{{ pub }}", "terms": "THESE ARE MY NEW TERMS"}
         }
        },
         
        {"get": {
            "url": "/deals/negotiations/{{ proposalID }}/partner/{{ buyer }}",  
            "headers": {
                "IXM-UserID": "{{ pub }}",
                "IXM-AccessToken": "{\"userID\":{{ pub }}, \"userType\":23}"
                }   
            }
        },
         
        {"put": {
          "url": "/deals/negotiations", 
          "beforeRequest": "stringToNumber",
          "headers": {
              "IXM-UserID": "{{ pub }}",  
              "IXM-AccessToken": "{\"userID\":{{ pub }}, \"userType\":23}"
            },
          "json": {"proposal_id": "{{ proposalID }}", "partner_id": "{{ buyer }}", "response": "accept"}
         }
        },
         
        {"get": {
            "url": "/deals/negotiations/{{ proposalID }}/partner/{{ pub }}", 
            "headers": {
                "IXM-UserID": "{{ buyer }}",
                "IXM-AccessToken": "{\"userID\":{{ buyer }}, \"userType\":22}"
                }   
            }
        },
         
        {"get": { 
            "url": "/deals/active",  
            "headers": {
                "IXM-UserID": "{{ buyer }}",
                "IXM-AccessToken": "{\"userID\":{{ buyer }}, \"userType\":22}"
                }   
            }
        }
      ]
    }
  ]
}